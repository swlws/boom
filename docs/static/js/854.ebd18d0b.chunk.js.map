{"version":3,"file":"static/js/854.ebd18d0b.chunk.js","mappings":"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","sources":["webpack://bitsnav-ts/./src/views/home/index.module.scss?20a8","../node_modules/.pnpm/@babel+runtime@7.19.0/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/.pnpm/@babel+runtime@7.19.0/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/.pnpm/@babel+runtime@7.19.0/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/.pnpm/@babel+runtime@7.19.0/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://bitsnav-ts/./src/views/home/RandomMap/index.module.scss?95a8","views/home/RandomMap/MapNode.tsx","views/home/RandomMap/helper.ts","views/home/RandomMap/index.tsx","../node_modules/.pnpm/@babel+runtime@7.19.0/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","views/home/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"home_container__tZBTl\"};","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"RandomMap_container__e5it5\",\"map\":\"RandomMap_map__vW5+h\",\"map-item\":\"RandomMap_map-item__VwJ+l\"};","import styles from \"./index.module.scss\";\n\ntype MapNodeProp = {\n  index: number; // 节点编号\n  // 节点的属性\n  options: {\n    bgColor: string; // 背景颜色\n    life: number; // 生命条\n  };\n};\n/**\n *\n *\n * @returns\n */\nexport default function MapNode(props: MapNodeProp) {\n  const { index, options } = props;\n\n  const life = options.life > 0 ? Array(options.life || 0).fill(\"•\") : \"\";\n  return (\n    <div\n      data-index={index}\n      className={`${styles[\"map-item\"]}`}\n      style={{ backgroundColor: options.bgColor }}\n    >\n      <div>{life}</div>\n    </div>\n  );\n}\n","/**\n * 随机颜色\n *\n * @returns\n */\nexport function randomColor(): string {\n  return \"#\" + ((Math.random() * 0xffffff) << 0).toString(16).padStart(6, \"0\");\n}\n\n/**\n * 计算行、列\n *\n * @param el\n * @returns\n */\nexport function dowRowCol(el: HTMLElement) {\n  const width = el.clientWidth;\n  const height = el.clientHeight;\n\n  const rows = Math.floor(height / 52);\n  const cols = Math.floor(width / 52);\n\n  return { rows, cols };\n}\n\n/**\n * 给一个起始点位置、以及列数，\n * 计算出半径R的周围点\n *\n * @param index 起始点\n * @param columns 列数\n * @returns\n */\nexport function findAround(index: number, columns: number): number[] {\n  const r = Math.floor(Math.random() * 4) + 1;\n  const arr = new Set([index]);\n\n  let i = -1,\n    j = 0;\n  while (i++ < r) {\n    j = r - i;\n    let t_o = index - columns * i;\n    let b_o = index + columns * i;\n\n    for (let k = 0; k < j; k++) {\n      arr.add(t_o + k);\n      arr.add(b_o + k);\n      arr.add(t_o - k);\n      arr.add(b_o - k);\n    }\n  }\n\n  return Array.from(arr);\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./index.module.scss\";\n\nimport MapNode from \"./MapNode\";\n\nimport { dowRowCol, findAround, randomColor } from \"./helper\";\n\ntype MapNodeType = { bgColor: string; life: number };\nfunction useNodeConfig(\n  rows: number,\n  cols: number\n): [MapNodeType[], (list: MapNodeType[]) => void] {\n  const [cfgs, setCfgs] = useState<MapNodeType[]>([]);\n\n  useEffect(() => {\n    const options: MapNodeType[] = new Array(rows * cols).fill(\"\").map(() => {\n      return {\n        bgColor: randomColor(),\n        life: Math.floor(Math.random() * 5) + 1,\n      };\n    });\n\n    setCfgs(options);\n  }, [rows, cols]);\n\n  return [cfgs, setCfgs];\n}\n\n/**\n * 处理每一个点的状态\n *\n * @param indexes 节点编号\n * @param cfgs 所有节点的配置信息\n * @param setCfg 修改节点配置信息\n */\nfunction handleEachNode(\n  indexes: number[],\n  cfgs: MapNodeType[],\n  setCfg: (cfgs: MapNodeType[]) => void\n) {\n  const list = [...cfgs];\n  for (let index of indexes) {\n    if (list[index] && --list[index].life <= 0) {\n      list[index].bgColor = \"transparent\";\n    }\n  }\n\n  setCfg(list);\n}\n\nfunction useBox(): [any, number, number] {\n  const ref = useRef(null);\n  const [rows, setRows] = useState(0);\n  const [cols, setCols] = useState(0);\n\n  useEffect(() => {\n    const { rows, cols } = dowRowCol(ref.current as any);\n\n    setRows(rows);\n    setCols(cols);\n  }, []);\n\n  return [ref, rows, cols];\n}\n\nfunction useMountDomEvent(\n  cols: number,\n  cfgs: MapNodeType[],\n  setCfg: (cfgs: MapNodeType[]) => void\n) {\n  let cached_index = -1;\n  const selectTarget = (e: any) => {\n    cached_index = -1;\n    const target = e.target;\n    const index = target.dataset.index;\n    if (!index) return;\n\n    cached_index = parseInt(index, 10);\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", function (e: KeyboardEvent) {\n      if (e.code !== \"Space\") return;\n      if (cached_index === -1) return;\n\n      const aroundNotes = findAround(cached_index, cols);\n      handleEachNode(aroundNotes, cfgs, setCfg);\n    });\n  }, [cols, cached_index, cfgs, setCfg]);\n\n  return selectTarget;\n}\n\ntype RandomMapProps = {};\nexport default function RandomMap(props: RandomMapProps) {\n  const [ref, rows, cols] = useBox();\n  const [cfgs, setCfg] = useNodeConfig(rows, cols);\n  const selectTarget = useMountDomEvent(cols, cfgs, setCfg);\n\n  const clickHandler = (e: any) => {\n    const target = e.target;\n    const index = target.dataset.index;\n    if (!index) return;\n\n    const n = parseInt(index, 10);\n    const aroundNotes = findAround(n, cols);\n    handleEachNode(aroundNotes, cfgs, setCfg);\n  };\n\n  const style = {\n    display: \"grid\",\n    gridTemplateColumns: `repeat(${cols},1fr)`,\n    gridTemplateRows: `50px`,\n  };\n\n  const childNodes = () => {\n    if (cfgs.length === 0) return <></>;\n\n    return Array(rows * cols)\n      .fill(<></>)\n      .map((color, index) => (\n        <MapNode key={index} index={index} options={cfgs[index]} />\n      ));\n  };\n\n  return (\n    <main\n      ref={ref}\n      className={styles.container}\n      style={style}\n      onClick={(e) => clickHandler(e)}\n      onMouseOver={(e) => selectTarget(e)}\n    >\n      {childNodes()}\n    </main>\n  );\n}\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import styles from \"./index.module.scss\";\n\nimport RandomMap from \"./RandomMap/index\";\n\nexport default function Main() {\n  return (\n    <article className={styles.container}>\n      <RandomMap />\n\n      <footer>鼠标悬浮选中方格，点击鼠标左键、或按空格键进行消除。</footer>\n    </article>\n  );\n}\n"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","MapNode","props","index","options","life","fill","className","styles","style","backgroundColor","bgColor","findAround","columns","r","Math","floor","random","Set","i","j","t_o","b_o","k","add","handleEachNode","indexes","cfgs","setCfg","list","o","allowArrayLike","it","length","F","s","n","done","value","e","_e","f","err","normalCompletion","didErr","call","step","next","_e2","useBox","ref","useRef","useState","rows","setRows","cols","setCols","useEffect","el","width","clientWidth","height","clientHeight","dowRowCol","current","RandomMap","setCfgs","map","toString","padStart","useNodeConfig","selectTarget","cached_index","document","addEventListener","code","target","dataset","parseInt","useMountDomEvent","display","gridTemplateColumns","gridTemplateRows","onClick","clickHandler","onMouseOver","color","Main"],"sourceRoot":""}